"use strict";(self.webpackChunkaudit_widatra=self.webpackChunkaudit_widatra||[]).push([[1612],{61612:function(t,a,e){e.r(a),e.d(a,{default:function(){return l}});e(30381);var i={name:"form-auditor-skill",metaInfo:{title:"Form Auditors Skill"},components:{},data:function(){return{urlSubmit:"/AdminVue/auditor-skill-insert",headerCard:"Form / Create Data Auditors Skill",textBtnSubmit:"Create",field:{File:"",ClauseAudit:"",StandartAudit:""},allErrors:[],opsCertificate:[{value:"Auditor",text:"Auditor"},{value:"Auditee",text:"Auditee"}],opsStatus:[{value:1,text:"Aktif"},{value:0,text:"Tidak Aktif"}],opsNIK:[],opsPosition:[],opsEmployee:[],opsOrganizer:[],opsStandartAudit:[],opsClause:[],oldFileAttachment:[],placeholderClause:"Pilih Personal Skill Terlebih Dahulu",formatDate:"dd/MM/yyyy",isNotif:!1,isFormEdit:!1,alertNotif:"",alertVariant:"alert-dark-danger"}},methods:{submitForm:function(){var t=new FormData;t.append("Id",this.field.Id),t.append("IdOrganizer",this.field.Organizer.Id),t.append("IdPersonel",this.field.Employee.Id),t.append("IdStandartAudit",this.field.StandartAudit.Id),t.append("Certificate",this.field.Certificate),t.append("Training",this.field.Training),t.append("Institution",this.field.Institution),t.append("Status",this.field.Status.value),t.append("Organizer",this.field.Organizer),t.append("Date",this.field.Date);for(var a=0;a<this.field.File.length;a++){var e=this.field.File[a];t.append("FileAttachment["+a+"]",e)}t.append("OldFileAttachment",JSON.stringify(this.oldFileAttachment));axios.post(this.urlSubmit,t,{headers:{"content-type":"multipart/form-data"}}).then(function(t){var a=t.data;a.status?this.$router.push({name:"master/data-auditor-skill",params:{isNotif:!0,gNotif:"notifications-success",tNotif:this.textBtnSubmit+" Data Success",txNotif:"Save Data Success!"}}):(this.isNotif=!0,this.alertNotif=a.message,this.alertVariant="alert-dark-danger",this.allErrors=a.validation)}.bind(this)).catch(function(t){console.log(t),this.isNotif=!0,this.alertNotif="Invalid Server Side!",this.alertVariant="alert-dark-danger"}.bind(this))},getData:function(t){axios.post("/AdminVue/auditor-skill-edit",{Id:t}).then(function(t){var a=t.data;if(this.field=a.data,this.field.File=[],""!=this.field.Path)for(var e=this.field.Path.length,i=0;i<e;i++)this.oldFileAttachment.push(this.field.Path[i]),this.field.File.push("/"+this.field.Path[i]);else this.oldFileAttachment=""}.bind(this)).catch(function(t){console.log(t),this.isNotif=!0,this.alertNotif="Invalid Server Side!",this.alertVariant="alert-dark-danger"}.bind(this))},getSelect:function(){axios.post("/AdminVue/auditor-skill-getSelect").then(function(t){this.opsEmployee=t.data.employee}.bind(this)).catch(function(t){console.log(t),this.opsEmployee=[]}.bind(this))},getStandartAudit:function(t,a){axios.post("/AdminVue/auditor-skill-getStandartAudit",{IdOrganizer:t}).then(function(t){this.opsStandartAudit=t.data.standart}.bind(this)).catch(function(t){}.bind(this))},getEmployeeNip:function(t){this.field.NIK=t.NIP},selectOrganizer:function(t){},selectStandartAudit:function(t){},backIndex:function(){this.$router.push("/RoleAdmin/master/data-auditor-skill")},handleFile:function(t){this.field.File=t.map((function(t){return t.file}))},priviewFile:function(){if(""!=this.oldFileAttachment)for(var t=0;t<this.oldFileAttachment.length;t++){var a="/"+this.oldFileAttachment[t];window.open(a,"_blank")}},handleRemove:function(t,a){if(1==this.isFormEdit){var e=this.oldFileAttachment.indexOf(a.source.replace("/clouds","clouds"));this.oldFileAttachment.splice(e,1)}}},mounted:function(){if(this.$route.params.isFormEdit){var t=this.$route.params.Id;t&&(this.getData(t),this.field.Id=t,this.isFormEdit=!0,this.urlSubmit="/AdminVue/auditor-skill-update",this.headerCard="Form / Edit Data Auditor Skill",this.textBtnSubmit="Update")}this.getSelect(),this.getStandartAudit(1,!1)}},l=(0,e(51900).Z)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-card",{staticClass:"mb-4",attrs:{header:t.headerCard,"header-tag":"h4"}},[t.isNotif?e("div",{staticClass:"alert alert-dismissible fade show",class:[t.alertVariant]},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert"},on:{click:function(a){t.isNotif=!t.isNotif}}},[t._v("Ã—")]),t._v("\n      "+t._s(t.alertNotif)+"\n    ")]):t._e(),t._v(" "),e("form",{attrs:{method:"POST"},on:{submit:function(a){return a.preventDefault(),t.submitForm()}}},[e("b-form-row",[e("b-form-group",{staticClass:"col-md-3"},[e("label",{staticClass:"form-label"},[t._v("Nama Karyawan")]),t._v(" "),e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]),t._v(" "),e("multiselect",{attrs:{options:t.opsEmployee,"allow-empty":!1,"show-labels":!1,placeholder:"Pilih Karyawan",label:"Name","track-by":"Name"},on:{select:t.getEmployeeNip},model:{value:t.field.Employee,callback:function(a){t.$set(t.field,"Employee",a)},expression:"field.Employee"}}),t._v(" "),t.allErrors.Name?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Name[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3"},[e("label",{staticClass:"form-label"},[t._v("NIK/NIP")]),t._v(" "),e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]),t._v(" "),e("b-input",{staticClass:"mb-1",attrs:{name:"NIK",state:!t.allErrors.NIK&&null,readonly:""},model:{value:t.field.NIK,callback:function(a){t.$set(t.field,"NIK",a)},expression:"field.NIK"}}),t._v(" "),t.allErrors.NIK?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.NIK[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3"},[e("label",{staticClass:"form-label"},[t._v("Date")]),t._v(" "),e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]),t._v(" "),e("datepicker",{staticClass:"mb-1",attrs:{format:t.formatDate,state:!t.allErrors.Date&&null,bootstrapStyling:!0,required:""},model:{value:t.field.Date,callback:function(a){t.$set(t.field,"Date",a)},expression:"field.Date"}}),t._v(" "),t.allErrors.Date?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Date[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3"},[e("label",{staticClass:"form-label"},[t._v("Organizer")]),t._v(" "),e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]),t._v(" "),e("b-input",{staticClass:"mb-1",attrs:{name:"Certificate",state:!t.allErrors.Organizer&&null,required:""},model:{value:t.field.Organizer,callback:function(a){t.$set(t.field,"Organizer",a)},expression:"field.Organizer"}}),t._v(" "),t.allErrors.Organizer?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Organizer[0]))]):t._e()],1)],1),t._v(" "),e("b-form-row",[e("b-form-group",{staticClass:"col-md-4"},[e("label",{staticClass:"form-label"},[t._v("Personal Skill")]),t._v(" "),e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]),t._v(" "),e("multiselect",{attrs:{options:t.opsStandartAudit,"allow-empty":!1,"show-labels":!1,placeholder:"Pilih Personal Skill",label:"Standart","track-by":"Standart"},on:{select:t.selectStandartAudit},model:{value:t.field.StandartAudit,callback:function(a){t.$set(t.field,"StandartAudit",a)},expression:"field.StandartAudit"}}),t._v(" "),t.allErrors.StandartAudit?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.StandartAudit[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3"},[e("label",{staticClass:"form-label"},[t._v("Pelatihan")]),t._v(" "),e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]),t._v(" "),e("b-input",{staticClass:"mb-1",attrs:{name:"Training",state:!t.allErrors.Training&&null,required:""},model:{value:t.field.Training,callback:function(a){t.$set(t.field,"Training",a)},expression:"field.Training"}}),t._v(" "),t.allErrors.Certificate?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Certificate[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3"},[e("label",{staticClass:"form-label"},[t._v("Institusi")]),t._v(" "),e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]),t._v(" "),e("b-input",{staticClass:"mb-1",attrs:{name:"Institution",state:!t.allErrors.Institution&&null,required:""},model:{value:t.field.Institution,callback:function(a){t.$set(t.field,"Institution",a)},expression:"field.Institution"}}),t._v(" "),t.allErrors.Certificate?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Certificate[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-2"},[e("label",{staticClass:"form-label"},[t._v("Status")]),t._v(" "),e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]),t._v(" "),e("multiselect",{attrs:{options:t.opsStatus,"allow-empty":!1,"preselect-first":!0,"show-labels":!1,placeholder:"Pilih Status",label:"text","track-by":"text"},model:{value:t.field.Status,callback:function(a){t.$set(t.field,"Status",a)},expression:"field.Status"}}),t._v(" "),t.allErrors.Status?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Status[0]))]):t._e()],1)],1),t._v(" "),e("b-form-row",[e("b-form-group",{staticClass:"col-md-12"},[e("label",[t._v("Attachment")]),t._v(" "),e("file-pond",{ref:"pondMyFile",attrs:{name:"File","label-idle":"Klik Untuk Menambahkan Attachment","allow-multiple":!0,files:t.field.File,required:""},on:{updatefiles:t.handleFile,removefile:t.handleRemove}}),t._v(" "),"Update"==t.textBtnSubmit?e("b-btn",{staticClass:"float-right",attrs:{type:"button",variant:"secondary"},on:{click:function(a){return t.priviewFile()}}},[t._v("Preview File")]):t._e()],1)],1),t._v(" "),e("b-form-row",[e("b-form-group",{staticClass:"col-md-6"}),t._v(" "),e("b-form-group",{staticClass:"col-md-6",attrs:{label:""}},[e("b-btn",{staticClass:"float-right ml-2",attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.textBtnSubmit))]),t._v(" "),e("b-btn",{staticClass:"float-right",attrs:{type:"button",variant:"secondary"},on:{click:function(a){return t.backIndex()}}},[t._v("Back")])],1)],1)],1)])],1)}),[],!1,null,null,null).exports}}]);