"use strict";(self.webpackChunkaudit_widatra=self.webpackChunkaudit_widatra||[]).push([[8812],{58812:function(t,a,e){e.r(a),e.d(a,{default:function(){return l}});var i={name:"form-position",metaInfo:{title:"Form Position"},components:{},data:function(){return{urlSubmit:"/AdminVue/position-insert",headerCard:"Form / Create Data Position",textBtnSubmit:"Create",field:{JobDesk:"",Email:"",Remarks:""},allErrors:[],opsParent:[],opsDepartment:[],opsDivision:[],isNotif:!1,alertNotif:"",alertVariant:"alert-dark-danger",isShow:!1}},methods:{submitForm:function(){var t=new FormData;this.field.Parent?this.field.Parent=this.field.Parent.Id:this.field.Parent=0,t.append("Id",this.field.Id),this.field.Departement?t.append("IdDepartment",this.field.Departement.Id):t.append("IdDepartment",0),this.field.Division?t.append("IdDivision",this.field.Division.Id):t.append("IdDivision",0),t.append("Parent",this.field.Parent),t.append("Code",this.field.Code),t.append("Name",this.field.Name),t.append("JobDesk",this.field.JobDesk),t.append("Remarks",this.field.Remarks),t.append("Email",this.field.Email);axios.post(this.urlSubmit,t,{headers:{"content-type":"multipart/form-data"}}).then(function(t){var a=t.data;a.status?this.$router.push({name:"master/data-position",params:{isNotif:!0,gNotif:"notifications-success",tNotif:this.textBtnSubmit+" Data Success",txNotif:"Save Data Success!"}}):(this.isNotif=!0,this.alertNotif=a.message,this.alertVariant="alert-dark-danger",this.allErrors=a.validation,this.scrollTop(0,1e3))}.bind(this)).catch(function(t){console.log(t),this.isNotif=!0,this.alertNotif="Invalid Server Side!",this.alertVariant="alert-dark-danger"}.bind(this))},getData:function(t){axios.post("/AdminVue/position-edit",{Id:t}).then(function(t){var a=t.data;this.field=a.data,0!=this.field.IdDepartment&&this.getParent(null,1)}.bind(this)).catch(function(t){console.log(t),this.isNotif=!0,this.alertNotif="Invalid Server Side!",this.alertVariant="alert-dark-danger"}.bind(this))},getSelect:function(){axios.post("/AdminVue/position-getSelect",{}).then(function(t){this.opsDepartment=t.data.departement,this.opsDivision=t.data.division}.bind(this)).catch(function(t){console.log(t),this.opsParent=[],this.opsDepartment=[]}.bind(this))},getParent:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==a)var e=t.Id;else e=this.field.Departement.Id;var i=0;this.field.Id&&(i=this.field.Id),axios.post("/AdminVue/position-getParent",{IdPosition:i,IdDepartment:e}).then(function(t){this.opsParent=t.data.parent}.bind(this)).catch(function(t){console.log(t),this.opsParent=[]}.bind(this))},backIndex:function(){this.$router.push("/RoleAdmin/master/data-position")}},mounted:function(){var t;this.$route.params.isFormEdit&&((t=this.$route.params.Id)&&(this.getData(t),this.field.Id=t,this.urlSubmit="/AdminVue/position-update",this.headerCard="Form / Edit Data Position",this.textBtnSubmit="Update"));this.$route.params.isShow&&(this.isShow=this.$route.params.isShow,(t=this.$route.params.Id)&&(this.getData(t),this.field.Id=t,this.headerCard="Show Data Position"));this.getSelect()}},s=i,l=(0,e(51900).Z)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-card",{staticClass:"mb-4",attrs:{header:t.headerCard,"header-tag":"h4"}},[t.isNotif?e("div",{staticClass:"alert alert-dismissible fade show",class:[t.alertVariant]},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert"},on:{click:function(a){t.isNotif=!t.isNotif}}},[t._v("Ã—")]),t._v("\n      "+t._s(t.alertNotif)+"\n    ")]):t._e(),t._v(" "),e("form",{attrs:{method:"POST"},on:{submit:function(a){return a.preventDefault(),t.submitForm()}}},[e("b-form-row",[e("b-form-group",{staticClass:"col-md-4"},[e("label",{staticClass:"form-label"},[t._v("Code")]),t._v(" "),0==t.isShow?e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]):t._e(),t._v(" "),e("b-input",{staticClass:"mb-1",attrs:{name:"Code",state:!t.allErrors.Code&&null,required:"",readonly:t.isShow},model:{value:t.field.Code,callback:function(a){t.$set(t.field,"Code",a)},expression:"field.Code"}}),t._v(" "),t.allErrors.Code?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Code[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-4"},[e("label",{staticClass:"form-label"},[t._v("Divisi")]),t._v(" "),e("multiselect",{attrs:{options:t.opsDivision,"allow-empty":!1,"show-labels":!1,placeholder:"Pilih Divisi",label:"Department","track-by":"Department",disabled:t.isShow},model:{value:t.field.Division,callback:function(a){t.$set(t.field,"Division",a)},expression:"field.Division"}}),t._v(" "),t.allErrors.Division?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Division[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-4"},[e("label",{staticClass:"form-label"},[t._v("Departement")]),t._v(" "),e("multiselect",{attrs:{options:t.opsDepartment,"show-labels":!1,placeholder:"Pilih Departement",label:"Department","track-by":"Department",disabled:t.isShow},on:{input:t.getParent},model:{value:t.field.Departement,callback:function(a){t.$set(t.field,"Departement",a)},expression:"field.Departement"}}),t._v(" "),t.allErrors.IdDepartment?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.IdDepartment[0]))]):t._e()],1)],1),t._v(" "),e("b-form-row",[e("b-form-group",{staticClass:"col-md-6"},[e("label",{staticClass:"form-label"},[t._v("Parent Position")]),t._v(" "),e("multiselect",{attrs:{options:t.opsParent,"allow-empty":!0,"show-labels":!1,placeholder:"Pilih Department Dahulu",label:"Name","track-by":"Name",disabled:t.isShow},model:{value:t.field.Parent,callback:function(a){t.$set(t.field,"Parent",a)},expression:"field.Parent"}}),t._v(" "),t.allErrors.Parent?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Parent[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3"},[e("label",{staticClass:"form-label"},[t._v("Position")]),t._v(" "),0==t.isShow?e("label",{staticClass:"form-label float-right text-danger"},[t._v("*Wajib Diisi")]):t._e(),t._v(" "),e("b-input",{staticClass:"mb-1",attrs:{name:"Name",state:!t.allErrors.Name&&null,required:"",readonly:t.isShow},model:{value:t.field.Name,callback:function(a){t.$set(t.field,"Name",a)},expression:"field.Name"}}),t._v(" "),t.allErrors.Name?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Name[0]))]):t._e()],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3"},[e("label",{staticClass:"form-label"},[t._v("Email")]),t._v(" "),e("b-input",{staticClass:"mb-1",attrs:{name:"Email",state:!t.allErrors.Email&&null,readonly:t.isShow},model:{value:t.field.Email,callback:function(a){t.$set(t.field,"Email",a)},expression:"field.Email"}}),t._v(" "),t.allErrors.Email?e("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.Email[0]))]):t._e()],1)],1),t._v(" "),e("b-form-row",[e("b-form-group",{staticClass:"col-md-6"}),t._v(" "),e("b-form-group",{staticClass:"col-md-6",attrs:{label:""}},[0==t.isShow?e("b-btn",{staticClass:"float-right ml-2",attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.textBtnSubmit))]):t._e(),t._v(" "),e("b-btn",{staticClass:"float-right",attrs:{type:"button",variant:"secondary"},on:{click:function(a){return t.backIndex()}}},[t._v("Back")])],1)],1)],1)])],1)}),[],!1,null,null,null).exports}}]);