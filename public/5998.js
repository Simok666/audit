"use strict";(self.webpackChunkaudit_widatra=self.webpackChunkaudit_widatra||[]).push([[5998],{5998:function(t,a,s){s.r(a),s.d(a,{default:function(){return l}});var e={name:"form-profile",metaInfo:{title:"Form Edit Profile"},components:{},data:function(){return{urlSubmit:"/AdminVue/profile-update",headerCard:"Form / Update Data Profile",textBtnSubmit:"Update",field:{myFile:""},allErrors:[],isNotif:!1,alertNotif:"",alertVariant:"alert-dark-danger",opsCity:[]}},methods:{submitForm:function(){0==this.field.myFile.length&&(this.field.myOldFile="");var t=new FormData;t.append("Id",this.$route.params.Id),t.append("EmpName",this.field.EmpName),t.append("NIP",this.field.NIP),t.append("DateBirth",this.field.DateBirth),t.append("CellPhone",this.field.CellPhone),t.append("IdCity",this.field.IdCity.Id),t.append("OldPassword",this.field.OldPassword),t.append("NewPassword",this.field.NewPassword),t.append("ConfirmPassword",this.field.ConfirmPassword),t.append("Address",this.field.Address),t.append("Bio",this.field.Bio),t.append("File",this.field.myFile[0]),t.append("OldFile",this.field.myOldFile);axios.post(this.urlSubmit,t,{headers:{"content-type":"multipart/form-data"}}).then(function(t){var a=t.data;a.status?(this.$store.replaceState({savedUserProfile:{}}),this.$router.push({name:"main/profile",params:{isNotif:!0,gNotif:"notifications-success",tNotif:this.textBtnSubmit+" Data Success",txNotif:"Save Data Success!"}})):(this.isNotif=!0,this.alertNotif=a.message,this.alertVariant="alert-dark-danger",this.allErrors=a.validation,this.scrollTop(0,1e3))}.bind(this)).catch(function(t){console.log(t),this.isNotif=!0,this.alertNotif="Invalid Server Side!",this.alertVariant="alert-dark-danger"}.bind(this))},getData:function(t){axios.post("/AdminVue/profile-edit",{Id:t}).then(function(t){var a=t.data;this.field=a.data,this.field.myFile="/"+this.field.Photo,this.field.myOldFile=this.field.Photo}.bind(this)).catch(function(t){console.log(t)}.bind(this))},getCity:function(){axios.post("/AdminVue/profile-get-city").then(function(t){this.opsCity=t.data.data}.bind(this)).catch(function(t){console.log(t),this.opsCity=[]}.bind(this))},backIndex:function(){this.$router.push("/RoleAdmin/main/profile")},handleFile:function(t){this.field.myFile=t.map((function(t){return t.file}))}},mounted:function(){this.getCity();var t=this.$route.params.Id;t&&this.getData(t)}},l=(0,s(51900).Z)(e,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("b-card",{staticClass:"mb-4",attrs:{header:t.headerCard,"header-tag":"h4"}},[t.isNotif?s("div",{staticClass:"alert alert-dismissible fade show",class:[t.alertVariant]},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert"},on:{click:function(a){t.isNotif=!t.isNotif}}},[t._v("Ã—")]),t._v("\n      "+t._s(t.alertNotif)+"\n    ")]):t._e(),t._v(" "),s("form",{attrs:{method:"POST"},on:{submit:function(a){return a.preventDefault(),t.submitForm()}}},[s("b-form-row",[s("b-form-group",{staticClass:"col-md-6"},[s("label",{staticClass:"form-label"},[t._v("Upload Foto")]),t._v(" "),s("file-pond",{ref:"pondMyFile",attrs:{name:"myFile","label-idle":"Click to Browse or Drop files here...","allow-multiple":!1,files:t.field.myFile,"accepted-file-types":"image/jpeg, image/png"},on:{updatefiles:t.handleFile}})],1),t._v(" "),s("b-form-group",{staticClass:"col-md-6"},[s("label",{staticClass:"form-label"},[t._v("Nama Lengkap")]),t._v(" "),s("b-input",{staticClass:"mb-1",attrs:{name:"EmpName",state:!t.allErrors.EmpName&&null,required:""},model:{value:t.field.EmpName,callback:function(a){t.$set(t.field,"EmpName",a)},expression:"field.EmpName"}}),t._v(" "),t.allErrors.EmpName?s("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.EmpName[0]))]):t._e()],1)],1),t._v(" "),s("b-form-row",[s("b-form-group",{staticClass:"col-md-4"},[s("label",{staticClass:"form-label"},[t._v("NIP")]),t._v(" "),s("b-input",{staticClass:"mb-1",attrs:{name:"NIP",state:!t.allErrors.NIP&&null,type:"number"},model:{value:t.field.NIP,callback:function(a){t.$set(t.field,"NIP",a)},expression:"field.NIP"}}),t._v(" "),t.allErrors.NIP?s("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.NIP[0]))]):t._e()],1),t._v(" "),s("b-form-group",{staticClass:"col-md-4"},[s("label",{staticClass:"form-label"},[t._v("Nomor HP")]),t._v(" "),s("b-input",{staticClass:"mb-1",attrs:{name:"CellPhone",state:!t.allErrors.CellPhone&&null,type:"number",required:""},model:{value:t.field.CellPhone,callback:function(a){t.$set(t.field,"CellPhone",a)},expression:"field.CellPhone"}}),t._v(" "),t.allErrors.CellPhone?s("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.CellPhone[0]))]):t._e()],1),t._v(" "),s("b-form-group",{staticClass:"col-md-4"},[s("label",{staticClass:"form-label"},[t._v("Kota / Kab")]),t._v(" "),s("multiselect",{attrs:{options:t.opsCity,"allow-empty":!1,"show-labels":!1,placeholder:"Pilih Kota / Kab",label:"City","track-by":"City"},model:{value:t.field.IdCity,callback:function(a){t.$set(t.field,"IdCity",a)},expression:"field.IdCity"}}),t._v(" "),t.allErrors.IdCity?s("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.IdCity[0]))]):t._e()],1)],1),t._v(" "),s("b-form-row",[s("b-form-group",{staticClass:"col-md-4"},[s("label",{staticClass:"form-label"},[t._v("Password Lama")]),t._v(" "),s("label",{staticClass:"form-label float-right text-primary"},[t._v("*Isi jika ingin merubah Password")]),t._v(" "),s("b-input",{staticClass:"mb-1",attrs:{name:"OldPassword",state:!t.allErrors.OldPassword&&null,type:"password"},model:{value:t.field.OldPassword,callback:function(a){t.$set(t.field,"OldPassword",a)},expression:"field.OldPassword"}}),t._v(" "),t.allErrors.OldPassword?s("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.OldPassword[0]))]):t._e()],1),t._v(" "),s("b-form-group",{staticClass:"col-md-4"},[s("label",{staticClass:"form-label"},[t._v("Password Baru")]),t._v(" "),s("label",{staticClass:"form-label float-right text-primary"},[t._v("*Isi jika ingin merubah Password")]),t._v(" "),s("b-input",{staticClass:"mb-1",attrs:{name:"NewPassword",state:!t.allErrors.NewPassword&&null,type:"password"},model:{value:t.field.NewPassword,callback:function(a){t.$set(t.field,"NewPassword",a)},expression:"field.NewPassword"}}),t._v(" "),t.allErrors.NewPassword?s("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.NewPassword[0]))]):t._e()],1),t._v(" "),s("b-form-group",{staticClass:"col-md-4"},[s("label",{staticClass:"form-label"},[t._v("Password Confirm Password")]),t._v(" "),s("label",{staticClass:"form-label float-right text-primary"},[t._v("*Isi jika ingin merubah Password")]),t._v(" "),s("b-input",{staticClass:"mb-1",attrs:{name:"ConfirmPassword",state:!t.allErrors.ConfirmPassword&&null,type:"password"},model:{value:t.field.ConfirmPassword,callback:function(a){t.$set(t.field,"ConfirmPassword",a)},expression:"field.ConfirmPassword"}}),t._v(" "),t.allErrors.ConfirmPassword?s("span",{staticClass:"text-danger"},[t._v(t._s(t.allErrors.ConfirmPassword[0]))]):t._e()],1)],1),t._v(" "),s("b-form-row",[s("b-form-group",{staticClass:"col-md-6"}),t._v(" "),s("b-form-group",{staticClass:"col-md-6",attrs:{label:""}},[s("b-btn",{staticClass:"float-right ml-2",attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.textBtnSubmit))]),t._v(" "),s("b-btn",{staticClass:"float-right",attrs:{type:"button",variant:"secondary"},on:{click:function(a){return t.backIndex()}}},[t._v("Back")])],1)],1)],1)])],1)}),[],!1,null,null,null).exports}}]);